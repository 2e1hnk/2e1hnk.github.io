<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="A copy of G4IZH's magnetic loop antenna.
">
    <meta name="author" content="Matt, 2E1HNK">
    <meta name="viewport" content="">
    <script async defer src="https://buttons.github.io/buttons.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-138987624-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-138987624-1');
    </script>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/media/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/media/css/beantech.min.css">

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/media/css/highlight.css">
    <link rel="stylesheet" href="/media/css/widget.css">
    <link rel="stylesheet" href="/media/css/rocket.css">
    <link rel="stylesheet" href="/media/css/toc.css">

    <!-- Custom Fonts -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    
    <title>HF Magnetic Loop Antenna</title>

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="/media/images/android-desktop.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">
    <link rel="apple-touch-icon-precomposed" href="/media/images/ios-desktop.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="/media/images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <link rel="shortcut icon" href="/media/images/favicon.png">

    <!-- LeafletJS CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="">

        <!-- Place favicon.ico & apple-touch-icon.png
          in the root of your domain and delete these references -->
    <link rel="shortcut icon" href="/media/images/favicon.ico">
    <link rel="apple-touch-icon" href="/media/images/apple-touch-icon.png">
    
    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="http://www.example.com/">
    -->

    
    <style type="text/css">
      header.intro-header {
        background-image: url(/media/images/antennafield.jpg);
      }
    </style>
    
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
  <script src="/media/js/leaflet-heatmap.js"></script>
  <script src="/media/js/HamGridSquare.js"></script>
  <script src="/media/js/adif.js"></script>
  <script src="/media/js/chart.min.js"></script>
          </head>
  <body id="magloop" ontouchstart="">
  
  <header class="intro-header" >
      <!-- Signature -->
      <div id="signature">
          <div class="container">
              <div class="row">
                  <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                      <div class="site-heading">
                          <h1>2E1HNK</h1>
                          <!--<hr class="small">-->
                          <span class="subheading"></span>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </header>

  <!-- Navigation -->
  <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">2E1HNK</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                  <li><a href="/">Home</a></li>
                  <li><a href="/about.html">About</a></li>
                  <li><a href="/blog">Blog</a></li>
                  <li><a href="/contests">Contest Reports</a></li>
                  <li><a href="/projects">Projects</a></li>
                  <li><a href="/ogps">OGPS</a></li>
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
  </nav>
  <script>
      // Drop Bootstrap low-performance Navbar
      // Use customize navbar with high-quality material design animation
      // in high-performance junk-free CSS3 implementation
      var $body   = document.body;
      var $toggle = document.querySelector('.navbar-toggle');
      var $navbar = document.querySelector('#huxblog_navbar');
      var $collapse = document.querySelector('.navbar-collapse');

      $toggle.addEventListener('click', handleMagic)
      function handleMagic(e){
          if ($navbar.className.indexOf('in') > 0) {
          // CLOSE
              $navbar.className = " ";
              // wait until animation end.
              setTimeout(function(){
                  // prevent frequently toggle
                  if($navbar.className.indexOf('in') < 0) {
                      $collapse.style.height = "0px"
                  }
              },400)
          }else{
          // OPEN
              $collapse.style.height = "auto"
              $navbar.className += " in";
          }
      }
  </script>

  <!-- Main Contents -->
  <div class="container">
    <div class="row">

      <!-- Post Container -->
      <div class="col-lg-8 col-lg-offset-1 col-md-8 col-md-offset-1 col-sm-12 col-xs-12 post-container">
        <h1>HF Magnetic Loop Antenna</h1>

  <p class="post-meta" style="margin: 10px 0;">
    Posted by Matt, 2E1HNK on <time datetime="2019-04-11">Thu, 11 Apr 2019</time>
  </p>

  
  <table>
  <tr>
    <td>
      <form action="javascript:calculate()">
        <label for="frequency">Frequency (MHz) <input type="text" name="frequency" id="frequency"></input></label><br />
        <label for="frequency">Loop Area (m²) <input type="text" name="area" id="area"></input></label><br />
        <label for="frequency">Loop Length (m) <input type="text" name="length" id="length"></input></label><br />
        <label for="frequency">Conductor Diameter (mm) <input type="text" name="diameter" id="diameter"></input></label><br />
        <label for="frequency">Power (Watts) <input type="text" name="power" id="power"></input></label><br />
        <input type="submit" />
      </form>
    </td>
    <td>
      <div class="results">
        Radiation Resistance (mΩ) = <span id="radiation_resistance"></span><br />
        Loss Resistance (mΩ) = <span id="loss_resistance"></span><br />
        Efficiency (%) = <span id="efficiency"></span><br />
        Inductance (μH) = <span id="inductance"></span><br />
        Inductive Reactance (Ω) = <span id="inductive_reactance"></span><br />
        Tuning Capacitor (pF) = <span id="tuning_capacitor"></span><br />
        Q Factor = <span id="q_factor"></span><br />
        Bandwidth (Hz) = <span id="bandwidth"></span><br />
        Distributed Capacitance (pF) = <span id="distributed_capacity"></span><br />
        Capacitor Potential (V) = <span id="capacitor_potential"></span><br />
        Minimum Plate Spacing (mm) = <span id="minimum_plate_spacing"></span>
      </div>
    </td>
  </tr>
</table>

<hr />

<table>
  <tr>
    <td>
      <form action="javascript:sweep()">
        <label for="frequency">Start Frequency (MHz) <input type="text" name="sweep_start_frequency" id="sweep_start_frequency"></input></label><br />
        <label for="frequency">End Frequency (MHz) <input type="text" name="sweep_end_frequency" id="sweep_end_frequency"></input></label><br />
        <label for="frequency">Step Size (MHz) <input type="text" name="sweep_step_size" id="sweep_step_size"></input></label><br />
        <label for="frequency">Loop Area (m²) <input type="text" name="sweep_area" id="sweep_area"></input></label><br />
        <label for="frequency">Loop Length (m) <input type="text" name="sweep_length" id="sweep_length"></input></label><br />
        <label for="frequency">Conductor Diameter (mm) <input type="text" name="sweep_diameter" id="sweep_diameter"></input></label><br />
        <label for="frequency">Power (Watts) <input type="text" name="sweep_power" id="sweep_power"></input></label><br />
        <input type="submit" />
      </form>
    </td>
    <td>
      Minimum Plate Spacing (mm) = <span id="sweep_minimum_plate_spacing"></span>
    </td>
  </tr>
</table>

<div style="width:100%;">
  <canvas id="q_chart_canvas"></canvas>
  <canvas id="capacitor_chart_canvas"></canvas>
</div>

<script src="/media/js/calculators/small-transmitting-loop.js"></script>

<script src="/media/js/chart.min.js"></script>

<script>
  // Q chart
  var q_chart_config = {
    data: {
      labels: [],
      datasets: [{
        label: 'Q Factor',
        backgroundColor: 'rgb(255, 99, 132)',
        borderColor: 'rgb(255, 99, 132)',
        data: [],
        yAxisID: 'y-axis-1',
        fill: false,
      },{
        label: 'Efficiency',
        backgroundColor: 'rgb(54, 162, 235)',
        borderColor: 'rgb(54, 162, 235)',
        data: [],
        yAxisID: 'y-axis-2',
        fill: false,
      }]
    },
    options: {
      scales: {
                        yAxes: [{
                            type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
                            display: true,
                            position: 'left',
                            id: 'y-axis-1',
                        }, {
                            type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
                            display: true,
                            position: 'right',
                            id: 'y-axis-2',

                            // grid line settings
                            gridLines: {
                                drawOnChartArea: false, // only want the grid lines for one axis to show up
                            },
                        }],
                    }
    }
  };

  // Capacitor chart
  var capacitor_chart_config = {
    data: {
      labels: [],
      datasets: [{
        label: 'Tuning Capacitor Value (pF)',
        backgroundColor: 'rgb(255, 99, 132)',
        borderColor: 'rgb(255, 99, 132)',
        data: [],
        yAxisID: 'y-axis-1',
        fill: false,
      },{
        label: 'Tuning Capacitor Potential (V)',
        backgroundColor: 'rgb(54, 162, 235)',
        borderColor: 'rgb(54, 162, 235)',
        data: [],
        yAxisID: 'y-axis-2',
        fill: false,
      }]
    },
    options: {
      scales: {
                        yAxes: [{
                            type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
                            display: true,
                            position: 'left',
                            id: 'y-axis-1',
                        }, {
                            type: 'linear', // only linear but allow scale type registration. This allows extensions to exist solely for log scale for instance
                            display: true,
                            position: 'right',
                            id: 'y-axis-2',

                            // grid line settings
                            gridLines: {
                                drawOnChartArea: false, // only want the grid lines for one axis to show up
                            },
                        }],
                    }
    }
  };

  function calculate() {
    result = calculateSTL(document.getElementById("frequency").value, document.getElementById("area").value, document.getElementById("length").value, document.getElementById("diameter").value, document.getElementById("power").value);
    document.getElementById("radiation_resistance").innerHTML = (result.radiation_resistance * 1e3).toFixed(2);
    document.getElementById("loss_resistance").innerHTML = (result.loss_resistance * 1e3).toFixed(2);
    document.getElementById("efficiency").innerHTML = (result.efficiency * 100).toFixed(2);
    document.getElementById("inductance").innerHTML = (result.inductance_H * 1e6).toFixed(2);
    document.getElementById("inductive_reactance").innerHTML = result.inductive_reactance_ohms.toFixed(2);
    document.getElementById("tuning_capacitor").innerHTML = (result.tuning_capacitor_F * 1e12).toFixed(3);
    document.getElementById("q_factor").innerHTML = result.q_factor.toFixed(1);
    document.getElementById("bandwidth").innerHTML = Math.round(result.bandwidth_hz);
    document.getElementById("distributed_capacity").innerHTML = (result.distributed_capacity_pF).toFixed(3);
    document.getElementById("capacitor_potential").innerHTML = Math.round(result.capacitor_potential_V);
    document.getElementById("minimum_plate_spacing").innerHTML = (result.minimum_plate_spacing_mm).toFixed(1);
  }

  function sweep() {
    result = STLSweep(
                parseFloat(document.getElementById("sweep_start_frequency").value),
                parseFloat(document.getElementById("sweep_end_frequency").value),
                parseFloat(document.getElementById("sweep_step_size").value),
                parseFloat(document.getElementById("sweep_area").value),
                parseFloat(document.getElementById("sweep_length").value),
                parseFloat(document.getElementById("sweep_diameter").value),
                parseFloat(document.getElementById("sweep_power").value)
              );
    q_chart_config.data.labels = [];
    q_chart_config.data.datasets[0].data = [];
    q_chart_config.data.datasets[1].data = [];

    capacitor_chart_config.data.labels = [];
    capacitor_chart_config.data.datasets[0].data = [];
    capacitor_chart_config.data.datasets[1].data = [];

    plateSpacing = 0;

    for ( var i = 0; i < result.length; i++ ) {
      console.log()
      q_chart_config.data.labels.push(result[i].frequency + "MHz");
      q_chart_config.data.datasets[0].data.push(result[i].q_factor);
      q_chart_config.data.datasets[1].data.push(result[i].efficiency * 100);

      capacitor_chart_config.data.labels.push(result[i].frequency + "MHz");
      capacitor_chart_config.data.datasets[0].data.push(result[i].tuning_capacitor_F*1e12);
      capacitor_chart_config.data.datasets[1].data.push(result[i].capacitor_potential_V);

      if ( parseFloat(result[i].minimum_plate_spacing_mm) > plateSpacing ) {
        plateSpacing = parseFloat(result[i].minimum_plate_spacing_mm);
      }
    }

    console.log(q_chart_config);

    var q_chart_ctx = document.getElementById('q_chart_canvas').getContext('2d');
    window.q_chart = new Chart.Line(q_chart_ctx, q_chart_config);
    window.q_chart.update();

    var capacitor_chart_ctx = document.getElementById('capacitor_chart_canvas').getContext('2d');
    window.capacitor_chart = new Chart.Line(capacitor_chart_ctx, capacitor_chart_config);
    window.capacitor_chart.update();

    document.getElementById("sweep_minimum_plate_spacing").innerHTML = Math.ceil(plateSpacing*10)/10;
  }

  calculateSTL(14.15, 0.5625, 3, 22, 20);
  var sweepResults = STLSweep(10, 30, 0.5, 0.5625, 3, 22, 20);
  console.log(sweepResults);
</script>        </div> <!-- /.post-container -->

      <!-- Sidebar Container -->
      <div class="col-lg-3 col-lg-offset-0 col-md-3 col-md-offset-0 col-sm-12 col-xs-12 sidebar-container">

        <!-- Featured Tags -->
          <section>
          <!-- no hr -->
            <h5>
              <a href="/tags/">FEATURED TAGS</a>
            </h5>
            <div class="tags">
              <a href="/blog/tags/UKAC.html" title="UKAC" rel="5">UKAC</a>
              <a href="/blog/tags/Activation.html" title="Activation" rel="7">Activation</a>
            </div>
          </section>

          <hr />

          <!-- Short About -->
          <section class="visible-md visible-lg">
            <h5><a href="/about/">ABOUT ME</a></h5>
            <div class="short-about">
              <img id = "avatar_pic" src="/media/images/2m-UKAC.jpg" />
              <p>Stay hungry,Stay foolish</p>
              <!-- Social Media Links -->
              <ul class="list-inline">
                <li>
                  <a target="_blank" href="https://twitter.com/2e1hnk">
                    <span class="fa-stack fa-lg">
                      <i class="fa fa-circle fa-stack-2x"></i>
                      <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                    </span>
                  </a>
                </li>
                <li>
                  <a target="_blank" href="https://github.com/2e1hnk">
                    <span class="fa-stack fa-lg">
                      <i class="fa fa-circle fa-stack-2x"></i>
                      <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                    </span>
                  </a>
                </li>
              </ul>
            </div>
          </section>

          <hr />

          <h5>RECENT POSTS</h3>
          <div class="widget">
            <ul>
                              <li><a href="/contests\ukac-may-2019.html">2m/70cm UKAC May 2019</a></li>                              <li><a href="/projects\satellite-station.html">2m/70cm Satellite Station</a></li>                              <li><a href="/blog\emsystech-raspi-lcd.html">Emsystech RaspiLCD</a></li>                              <li><a href="/projects\magloop.html">HF Magnetic Loop Antenna</a></li>                              <li><a href="/projects\suppliers.html">Suppliers</a></li>                          </ul>
          </div>

          <hr />

          <!-- Friends Blog -->

          <h5>FRIENDS</h5>
            <ul class="list-inline">
              <li><a href="https://g1ybb.uk/" target="_blank">G1YBB</a></li>
            </ul>

      </div> <!-- /.sidebar-container -->
    </div> <!-- /.row -->
  </div> <!-- /.container -->

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          <ul class="list-inline text-center">
            <li>
              <a target="_blank" href="https://twitter.com/2e1hnk">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
            <li>
              <a target="_blank"  href="https://github.com/2e1hnk">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </footer>

  <!-- jQuery -->
  <script src="/media/js/jquery.min.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script src="/media/js/bootstrap.min.js"></script>

  <!-- Custom Theme JavaScript -->
  <script src="/media/js/hux-blog.min.js"></script>

  <!-- TOC -->
  <script type="text/javascript" src="/media/js/toc.js" async=""></script>


  <!-- async load function -->
  <script>
  function async(u, c) {
  var d = document, t = 'script',
  o = d.createElement(t),
  s = d.getElementsByTagName(t)[0];
  o.src = u;
  if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
  s.parentNode.insertBefore(o, s);
  }
  </script>

  <!--
  Because of the native support for backtick-style fenced code blocks
  right within the Markdown is landed in Github Pages,
  From V1.6, There is no need for Highlight.js,
  so Huxblog drops it officially.

  - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
  - https://help.github.com/articles/creating-and-highlighting-code-blocks/
  -->
  <!--
  <script>
  async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
    hljs.initHighlightingOnLoad();
  })
  </script>
  <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
  -->


  <!-- jquery.tagcloud.js -->
  <script>
  // only load tagcloud.js in tag.html
  if($('#tag_cloud').length !== 0){
  async("http://www.huweihuang.com/js/jquery.tagcloud.js",function(){
    $.fn.tagcloud.defaults = {
        //size: {start: 1, end: 1, unit: 'em'},
        color: {start: '#bbbbee', end: '#0085a1'},
    };
    $('#tag_cloud a').tagcloud();
  })
  }
  </script>

  <!--fastClick.js -->
  <script>
  async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
  var $nav = document.querySelector("nav");
  if($nav) FastClick.attach($nav);
  })
  </script>


                  
                        
  </body>
</html>